@page "/superkat/{SuperkatNumber:int}"

@using Superkatten.Katministratie.Application.Contracts
@using Superkatten.Katministratie.Web.Services

@inject NavigationManager _navigationManager

<Input Placeholder="Name" @bind-Value="@SuperkatName"  />
<Button Type="@ButtonType.Primary" OnClick="()=>OkClick()"/>

@code
{
    [Inject]
    private ISuperkattenListService _superkattenService { get; set; }
    
    [Parameter]
    public int SuperkatNumber{ get; set; }

    
    public string SuperkatName { get; set; }


    protected override async Task OnInitializedAsync() 
    {
        var superkat = await _superkattenService.GetSuperkatAsync(SuperkatNumber);
        SuperkatName = superkat.Name;
    }

    public void OkClick()
    {
        var updateSuperkatParameters = new UpdateSuperkatParameters
            {
                Name = SuperkatName
            };
        _superkattenService.UpdateSuperkat(SuperkatNumber, updateSuperkatParameters);
        _navigationManager.NavigateTo($"/");
    }
}