@page "/"

@using Superkatten.Katministratie.Host.Components
@using Superkatten.Katministratie.Host.Helpers
@using Superkatten.Katministratie.Host.Services
@using Superkatten.Katministratie.Host.Services.Authentication

@inject Navigation _navigation
@inject ISuperkattenListService _superkattenService
@inject IAuthenticationService _authenticationService

<PageTitle>Superkatten</PageTitle>

<AntDesign.Row>
    <AntDesign.Col Class="col-2">
        <Image Src="Images/superkat.jpg"></Image>
    </AntDesign.Col>
    <AntDesign.Col Class="col-10">
        <h1>Superkatten katministratie</h1>
    </AntDesign.Col>
</AntDesign.Row>

<AntDesign.Row>
    
    @if (!_authenticationService.IsAuthenticated)
    {
        <AntDesign.Button Block="@true" OnClick="OnRegister" Class="mb-2">
            Register
        </AntDesign.Button>

        <AntDesign.Button Block="@true" OnClick="OnLogin" Class="mb-2">
            Login
        </AntDesign.Button>
    }
    else
    {
        <AntDesign.Button Block="@true" OnClick="OnLogout" Class="mb-2">
            Logout
        </AntDesign.Button>
        
        <AntDesign.Button Block="@true" OnClick="OnCreateSuperkat" Class="mb-2">
            Nieuwe kat toevoegen
        </AntDesign.Button>

        <AntDesign.Divider />

        <AntDesign.Button Block="@true" OnClick="OnShowOverviewSuperkatten" Class="mb-2">
            Lijst katten
        </AntDesign.Button>
    
        <AntDesign.Button Block="@true" OnClick="OnShowOverviewGastgezinnen" Class="mb-2">
            Lijst gastgezinnen
        </AntDesign.Button>
    }
</AntDesign.Row>

@code {
    protected override Task OnInitializedAsync()
    {
        _authenticationService.InitializeAsync();
        return base.OnInitializedAsync();
    }


    private void OnRegister()
    {
        _navigation.NavigateTo("Register");
    }

    private void OnLogin()
    {
        _navigation.NavigateTo("Login");
    }

    private void OnLogout()
    {
        _navigation.NavigateTo("Logout");
    }

    private void OnCreateSuperkat()
    {
        _navigation.NavigateTo("CreateSuperkat");
    }

    private void OnShowOverviewSuperkatten()
    {
        _navigation.NavigateTo("OverviewSuperkatten");
    }

    private void OnShowOverviewGastgezinnen()
    {
        _navigation.NavigateTo("OverviewGastgezinnen");
    }
}