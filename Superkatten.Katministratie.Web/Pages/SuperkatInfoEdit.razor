@page "/superkat/{SuperkatNumber:int}"

@using Superkatten.Katministratie.Application.Contracts
@using Superkatten.Katministratie.Web.Services

@inject NavigationManager _navigationManager

<Button Type="@ButtonType.Primary" OnClick="()=>OkClick()"/>
<Input Placeholder="Name" @bind-Value="@SuperkatName"  />
<Input Placeholder="Location" @bind-Value="@SuperkatLocation"  />

@code
{
    [Inject]
    private ISuperkattenListService _superkattenService { get; set; }

    [Parameter]
    public int SuperkatNumber{ get; set; }


    public string SuperkatName { get; set; }

    public int SuperkatLocation { get; set; }

    protected override async Task OnInitializedAsync() 
    {
        var superkat = await _superkattenService.GetSuperkatAsync(SuperkatNumber);
        SuperkatName = superkat.Name;
        SuperkatLocation = superkat.Location;
    }

    public async void OkClick()
    {
        var updateSuperkatParameters = new UpdateSuperkatParameters {
            Name = SuperkatName,
            Location = SuperkatLocation
        };
        await _superkattenService.UpdateSuperkatAsync(SuperkatNumber, updateSuperkatParameters);
        _navigationManager.NavigateTo($"/");
    }
}